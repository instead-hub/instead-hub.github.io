<!DOCTYPE html> 
<html lang="ru">
<head>
	<title>
		ПРИНТЕД 4 - INSTEAD
	</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="index,follow">
	<base href="/">
	<link rel="canonical" href="/article/printed4/">
	<link rel="preload" href="/css/smorg.css" as="style">
	<link rel="stylesheet" href="/css/smorg.css">
	<meta name="generator" content="Hugo 0.64.0" />

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="theme-color" content="#ffffff">
</head>
<body>
		
	<nav class="navbar" aria-label="main navigation">
		<div class="container">
			<div class="navbar-brand">
				
				    <a id="en-lang" class="navbar-item" style="padding:0" href="/en"><img alt="en" src="/img/en.png"></a>
				    <a class="navbar-item" id="ru-lang" href="/"><img alt="ru" src="/img/ru.png"></a>
				
				<a class="navbar-item has-text-white-ter" href="/"><span class="has-text-weight-bold"><span class="has-text-weight-bold">IN<span class="has-text-danger">STEAD</span>3</span></span>
</a>
				<div class="navbar-burger burger" data-target="navMenu">
				  <span></span>
				  <span></span>
				  <span></span>
				</div>
			</div>
			<div class="navbar-menu" id="navMenu">
				<div class="navbar-end">
					<a class="navbar-item " href='/#about'>О проекте</a>
				
					<a class="navbar-item " href='/#download'>Скачать</a>
				
					<a class="navbar-item " href='/#doc'>Авторам</a>
				
				</div>
			</div>
		</div>
	</nav>
<section class="section" itemscope itemtype="http://schema.org/WebPage">
	<div class="container">
		<div class="columns">
			<div class="column is-8 is-offset-2">
				<article class="content">
					<h1 class="title is-3">ПРИНТЕД 4</h1>
					<p class="subtitle is-6 has-text-grey"><em>
<br>Опубликовано 
<time datetime="2017-11-04">04.11.2017</time>; тег(и) 
<a href="/tags/printed">printed</a>
</em></p>
<h2 id="httpinsteadsyscallru">4 ноября 2017 г.<br>
<a href="http://instead.syscall.ru">http://instead.syscall.ru</a></h2>
<p>Когда просматриваешь старые электронные журналы, рассцвет которых в
нашей стране пришелся на бум &ldquo;бытовых&rdquo; компьютеров, чувствуешь какую
то странную ностальгию. В этой ностальгии есть романтика неизведанных
просторов. В ней слышатся деликатные отзвуки отступающего аналогового
мира который еще не заполнен грохотом мчащихся потоков дешевой
информации. Но в котором есть чувство свободы и безграничных
возможностей творчества.</p>
<p>Но вот мы движемся постепенно от номера к номеру и видим как эпоха
уходит, как одно за другим закрываются издания, как все большую роль
начинает играть коммерческий фактор, а уже стареньким бытовым
компьютерам больше нечего предложить современным подросткам. И вот, мы
читаем последний номер какого-нибудь журнала и доходим до слова
&ldquo;пока!&quot;.</p>
<p>Ждет ли такая же судьба Принтед и INSTEAD? Не буду кривить душой &ndash;
вероятно. Время романтики проходит. Время чтения проходит. Аналоговое
время &ndash; проходит. Творчество в том виде, в котором оно и составляет
движущую силу проекта INSTEAD, уже мало интересно повзрослевшим
романтикам 80-90х. А для нового поколения его форма тяжела для хоть
какого-нибудь целостного восприятия.</p>
<p>Но когда будет написано это последнее &ldquo;пока&rdquo; я не знаю. И надеюсь, что
может быть прямо сейчас кто-нибудь заново открывает игры, которые мы
писали&hellip;</p>
<p><em>Петр Косых</em></p>
<h2 id="новости">Новости</h2>
<p>За время прошедшее со времени выпуска прошлого ПРИНТЕДА произошло
много событий, которые уже вряд ли можно назвать новостями. Однако
ПРИНТЕД выполняет роль бортового журнала, поэтому&hellip;</p>
<h3 id="выпуск-instead3">Выпуск INSTEAD3</h3>
<p>Я давно думал о том, чтобы переписать все. За время работы
над INSTEAD было выявлено множество вещей, которые просто
напрашивались на переосмысление. Но переписать все &ndash; это значит
начать с чистого листа. Это пугало. Да и не было уверенности в
востребованности этого труда.</p>
<p>Тем не менее, работы над STEAD3 API и рефакторингом C части начались и
к весне 2017 года INSTEAD 3.0 был выпущен. Я надеюсь, что новое API и
новый INSTEAD найдут свой отклик. На мой взгляд, он стал лучше. А
после того как появились первые игры на новом API я понял, что все
было не зря.</p>
<h3 id="подкаст-от-вадима-балашова">Подкаст от Вадима Балашова</h3>
<p>Вадимом Балашовым (vvb) был
записан
<a href="http://instead.syscall.ru/podcasts/podcast_05.ogg">подкаст</a>. В
основном он посвящен выпуску INSTEAD 3. К сожалению, Вадим после этого
снова ушел из поля зрения и его творческие планы на данный момент
полностью неизвестны. Подкаст содержит в себе много обзорной
информации по INSTEAD3.</p>
<h3 id="выпуск-plaininstead">Выпуск PlainINSTEAD</h3>
<p>Модульность INSTEAD 3 повысила переносимость ядра и Антон Ласточкин
адаптировал INSTEAD для незрячих и слабовидящих. В результате, проект
PlainInstead стал частью instead-hub!  Несколько игр были
предоставлены незрячим и встретили свой отклик. Это очень хорошая
новость!</p>
<h3 id="выпуск-instead-js">Выпуск INSTEAD-JS</h3>
<p>Благодаря technix у инстеда появился новый js-порт. Обеспечивается
совместимость со многими играми, в том числе и метапарсером. Поддержка
спрайтов не
полная. <a href="http://instead-games.ru/index.php?online=1">Некоторые игры</a> в
репозитории доступны для запуска в INSTEAD-JS.</p>
<h3 id="выпуск-instead-em">Выпуск INSTEAD-EM</h3>
<p>Я портировал INSTEAD на emscripten. Теперь любую игру можно запустить
прямо в браузере. Минусы по сравнению с INSTEAD-JS: нагрузка на
процессор и необходимость WEBGL. Плюсы: полный аналог настольной
версии. Проигрыватель интегрирован в репозиторий. Вы можете запустить
<em>любую</em> игру, нажав на соответствующую ссылку.</p>
<h3 id="instead-в-debian">INSTEAD в Debian</h3>
<p>Благодаря усилиям Sam Protsenko (joe-skb7) INSTEAD 3.1.2 попал в
Debian! На данный момент он в testing ветке. Тоже отличная новость!</p>
<h3 id="порт-на-sailfishos">Порт на SailfishOS</h3>
<p>В духе и традиции INSTEAD появился новый порт для мало кому известной
платформы: SailfishOS. Инстед и несколько игр уже находятся на
openrepos. Для тех кто в курсе, я надеюсь, это хорошая новость.</p>
<h3 id="instead-уходит-в-подполье">INSTEAD уходит в подполье?</h3>
<p>У INSTEAD открылся <a href="http://club.syscall.ru">узел сети idec</a>. Узел
назван символично &ndash; &ldquo;Клуб&rdquo;. Создание клуба своего рода анти-реакция
от разочарования общим состоянием и тенденциями сообщества
РИЛ. Фактически, клуб &ndash; это уход в подполье. И я должен признаться,
что меня все чаще посещают мысли о закрытии форума INSTEAD.</p>
<p>На данный момент техническая поддержка осуществляется также
на <a href="https://gitter.im/instead-hub/instead">gitter</a>.</p>
<p>Так что не исключено, что в какой то момент (например, к лету) форум
будет закрыт.</p>
<p>Вопрос окончательно не решен, но даже в случае закрытия форума, я буду
готов передать базы и код тем людям, которым он нужен.</p>
<h2 id="игры">Игры</h2>
<p>Закончив раздел новостей я подумал, что INSTEADу пока рано думать о
пенсии. Ведь за всеми описанными событиями стоит труд конкретных
людей, которые, так или иначе, заинтересованы в проекте. Это не может не
радовать, особенно если вспомнить тот факт, что и с играми дела
обстоят далеко не плохо.</p>
<h3 id="проводник">Проводник</h3>
<p>Это моя игра, которую я начал делать для тестирования STEAD3 API. Как
это часто бывает, началась игра с настроения. Я сидел в одном
помещении, рядом находились люди. В какой то момент я вдруг понял что
между нами &ndash; пропасть. Мы были абсолютно разными. Я почувствовал, что
я в этом обществе являюсь белой вороной. Я не знал, что я мог бы
выбрать в качестве темы для разговора. Я был уверен что все что было в
моей голове на тот момент &ndash; им было абсолютно неинтересно.</p>
<p>К счастью, у меня был ноутбук и я начал записывать сценарий
&ldquo;Проводника&rdquo;. Я начал со сцены &ldquo;застолье&rdquo;.</p>
<p>Уже потом я попытался сделать какой-то осмысленный сюжет из
атмосферы. А также под влиянием произведений Гофмана и Грина. Кажется,
сюжет получался, и я начал писать код.</p>
<p>К середине игры я вдруг понял, что она необычно жестока. Меня это
смутило, я стараюсь не делать такие игры. Почему же так получается?
Я сел и задумался. Может быть стоит уничтожить эту игру, которая вышла
из под контроля? И вот в какой то момент вдруг пришло полное
переосмысление сюжета. События в игре оставались примерно теми же, но
их смысл полностью поменялся. Я понял что игру дописать нужно. А
жестокость оказалась кажущейся. (Так что имейте в виду, в этой игре
никто никого не убил, даже если кажется обратное).</p>
<p>В общем, получилось то, что получилось. Игра, конечно, странновата. Но
как и &ldquo;Краски сентября&rdquo;, мне она чем то дорога. Скорее всего, я больше
никогда не напишу &ldquo;Квантового кота&rdquo;. :) Большую часть музыки для
Проводника написал true-grue, за что ему отдельное спасибо!</p>
<h3 id="инстедоз-5">Инстедоз 5</h3>
<p>Инстедоз 5 начался спонтанно в результате инициативы Irremann. Не
смотря на отсутствие четких правил и какого-либо организующего начала,
инстедоз удался!</p>
<p>Связующий сюжет абсолютно трешовый, шит белыми нитками, но&hellip; Но
получилось! И на мой взгляд это один из лучших выпусков (наряду с 3-м
инстедозом).</p>
<p>Отдельно хотелось бы отметить &ldquo;возвращение&rdquo; Casper_nn. Его игра
&ldquo;Весна&rdquo; абсолютно прекрасна!</p>
<p>Тут я хотел бы отвлечься и высказать несколько неполиткорректных
вещей. Игра Весна &ndash; прекрасный образец игры для которой и был создан
INSTEAD. Если вы не уважаете труд автора игры, если вы считаете автора
глупее себя и не готовы читать, если вы не способны быть
интеллигентным &ndash; эта игра не для вас! Так вот, что-то мне
подсказывает, что аудитория этой игры не так широка, как, скажем,
аудитория штампованной визуальной новеллы. И именно это является
причиной моего пессимизма по отношению к будущему нашего жанра.</p>
<p>Я не сомневаюсь в объективности того, что &ldquo;Весна&rdquo; обладает культурной
ценностью. Но тех, кто готов оценить эту игру &ndash; все меньше.</p>
<p>А ведь интерактивная литература &ndash; удивительный жанр! Как появление
трекеров в свое время дало возможность заниматься творчеством
не-музыкантам, так и интерактивная литература дает возможность
попробовать себя в роли режиссера или писателя&hellip; Но как мы этим
пользуемся? И кому это нужно?</p>
<p>В общем, игра &ldquo;Весна&rdquo; из сборника ИНСТЕДОЗ 5 &ndash; пример качественного
творчества.</p>
<p>Все остальные игры сборника, на мой взгляд, тоже хорошие. Так что если
вы еще не прошли ИНСТЕДОЗ &ndash; обязательно попробуйте. Тем более, что
это можно сделать и <a href="http://instead-games.ru/game.php?ID=252">онлайн</a>.</p>
<h3 id="капсула">Капсула</h3>
<p>Пользуясь случаем хочу передать &ldquo;спасибо!&rdquo; technix за его INSTEAD-js.
Мы часто спорили с ним на jabber канале instead о взглядах на
творчество, но это всегда воспринималось как споры приносящие
пользу. Его игры: Фотоохота (в сборнике ИНСТЕДОЗ), Звездная Империя
(перенос настольной игры) и &ldquo;Капсула&rdquo; &ndash; примеры добротных и
качественных игр.</p>
<p>technix смотрит в сторону коммерческих CYOA игр и разрабатывает свой
движок. А пока он его не доделал &ndash; мы можем воспользоваться моментом и
получить удовольствие от совсем маленькой INSTEAD игры &ndash;
&ldquo;Капсула&rdquo;.</p>
<p>Сложно говорить об этой игре не открыв главного секрета сюжета, поэтому я
просто отмечу, что игра подтверждает то исключение, что и в короткой
игре можно оставить интересное &ldquo;послевкусие&rdquo;, которое выходит за рамки
собственно игрового процесса. Игра &ldquo;Капсула&rdquo; именно такая. Очень
надеюсь, что до ухода в мир CYOA и коммерческих игр technix еще
успеет выпустить что-нибудь на INSTEAD.</p>
<h3 id="кнопка">Кнопка</h3>
<p>Еще до выпуска INSTEAD 3 Casper писал о том, что пишет игру с
инженерными загадками. Честно говоря, не очень было понятно о чем
именно речь, но иллюстрации выглядели изумительно. И вот совсем не
давно, Casper выложил первую часть своей игры.</p>
<p>Игра прекрасно оформлена: иллюстрации, схемы, тексты, анимации, звуки
&ndash; все на высоте! Но невозможно не отметить то, что я отметил в игре
&ldquo;Весна&rdquo; &ndash; Каспер не боится творить &ldquo;олдскул&rdquo; без оглядки на угоду
вкусов большинства. Игра имеет ярко выраженный характер и это
отчетливо заметно с первого кадра.</p>
<p>Должен заметить, я не играл в &ldquo;тактический симулятор&rdquo; Code-10,
написанный Каспером уже очень давно. И кажется, я сделал ошибку. Так
как обе игры которые я посмотрел: и Весна и Кнопка &ndash; очень сильно
меня впечатлили.</p>
<p>Но вернемся к кнопке. По жанру это квест с вкраплениями инженерных
задач стилизованных под схемотехнику, которую мы должны
ремонтировать. Задачи интересные и разнообразные. Правда, в первой
части их не много. Уровень сложности подобран так что у
внимательного и интеллигентного игрока не возникнет особых проблем при
прохождении.</p>
<p>В игру встроены анимационные ролики, которые добавляют уюта и
лампового тепла. Когда я играл в Кнопку я чувствовал какое-то
неуловимое влияние другой игры: Лидия (от Василия Воронкова). Моя
интуиция меня не подвела, вскоре я узнал, что Лидия также понравилась
Касперу как и мне и он испытал ее влияние на своем творчестве.</p>
<p>Работы над остальными частями &ldquo;Кнопки&rdquo; продолжаются. Я очень надеюсь,
что мы их дождемся.</p>
<h3 id="штурман">Штурман</h3>
<p>Тема обучения азам программирования давно витает рядом с нашим
проектом. В данном случае игра &ldquo;Штурман&rdquo; это та самая игра, которая
может быть интересна именно в этом аспекте.</p>
<p>Штурман от kerber &ndash; ремейк одноименной игры Олега Шамшуры для платформы MSX.</p>
<p>Я хочу предоставить слово автору ремейка, для этого я попросил его
написать несколько строк в ПРИНТЕД и рассказать о том, как протекал
творческий процесс. Читайте об этом в новой рубрике ПРИНТЕДА:</p>
<h2 id="за-кадром-штурман----ремейк-с-msx">За кадром: ШТУРМАН &ndash; ремейк с MSX</h2>
<p>Начиналось оно всё с подкаста true-grue об играх для
программистов. Хотя нет, ещё раньше видел я игры COLOBOT и LightBot. И
вот, среди прочих мыслей мелькнула у меня такая, что неплохо бы и мне
что-нибудь эдакое&hellip; Мелькнула и пропала. Ни знаний ни навыков тогда
необходимых не было. И вот, в феврале, да, кажется это было в феврале,
при виде игры &ldquo;Штурман&rdquo;, эта мысль вернулась опять. Штурман выглядел
одновременно круто и просто. Одновременно в тот момент gl00my готовил
к выпуску третью версию движка и это тоже было круто и просто. Ещё
одно событие, просто подпихнувшее меня к созданию ремейка - у меня
появилась книга Р. Иерузалимски &ldquo;Программирование на Lua&rdquo;, третье
издание.</p>
<p>Опять спасибо true-grue. Он сделал сборку эмулятора ретрокомпьютера
MSX и образа игры. C е го помощью я уже вплотную подступился к
&ldquo;Штурману&rdquo; и прошёл первые обучающие уровни. Это было ещё круче чем на
видео.</p>
<p>Изучив объекты, доступные на первых уровнях, я начал кодить
прототип. Тут небольшое отступление - при разработке я воспользовался
концепцией так называемого &ldquo;прогрессивного джипега&rdquo;. Суть его в том,
что игра пишется сразу целиком. В каждой итерации приступов
программирования в конце приступа игра должна быть полностью
рабочей. От начала и до конца.</p>
<p>В первой итерации поле отображалось на экране целиком, объекты
отображались в виде символов из шрифта и полностью отсутствовала
анимация. Игра содержала четыре обучающих уровня и переход между ними
осуществлялся правкой исходника игры и дефолтная инстедовская тема
оформления. Играть в это можно было никак. Просто посмотреть на
поле. Это было прекрасно.</p>
<p>Далее разработка покатилась как по рельсам. В следующей итерации была
сделана тема оформления и впилен прототип интерфейса
программирования. В интерфейсе можно было вводить любой символ с
клавиатуры и елозить курсором, указывающим фокус ввода. Сразу покрасил
специическим образом символы, обозначающие команды. Долго игрался с
интерфейсом, добиваясь соответствия логики его работы в ремейке и в
оригинале. Параллельно читал Иерузалимски и открывал для себя новые и
новые глубины знаний Lua.</p>
<p>Далее настала очередь ядра игры. Оно базировалось на двух только что
изученных мной вещах - операторе goto и способе организации стека при
помощи таблиц Lua. Тут тоже не мудрил. Моей целью было добиться
выполнения цепочки команд в одном из четырёх наличных
стеков. Переключение между стеками выполнялось на этом этапе &hellip; путём
редактирования исходника. И вот значок кораблика бодро заелозил по
полю а в терминале в нужном порядке выстроилась последовательносто
исполняемых команд без пропусков и пробелов.</p>
<p>Настала пора увязывать четыре стека в единый программный узел. Много
читал Иерузалимски и меня осенило как реализовать из четырёх стеков
один поток управления. Именно тогда замаячил призрак детектирования
рекурсии на горизонте. Тут я нарисовал в тетради БОЛЬШОЙ
восклицательный знак и просто проигнорировал отсутствие этого важного
элемента.  Здраво рассудив что какое-то решение наверняка есть, я
занялся программированием логики движения кораблика и его
взаимодействием с объектами на карте. И, востоянно поглядывая на
БОЛЬШОЙ восклицательный знак, донимал людей в конфе инстеда детекцией
рекурсии. Мне объясняли, объясняли, снабжали литературой по построению
интерпретаторов (Слава скобочкам Лиспа!) но я всё равно не
понимал. Изобретал какие-то химерические костыли и снова донимал людей
в конфе. Наконец Minoru (большущее ему спасибо!) объяснил всё так, что
я понял!</p>
<p>Дальше разработка вновь стремительно покатилась. Тут важный момент -
встретив затык я не стал бросать все усилия на его преодоление, а
делал те штуки, которые я понимал как делать, однако не упуская из
виду существование затыка и шевеля его понемногу с разных сторон.
Нарисовал графоний. Прикрутил анимацию. Напечатал текст
обучалок. Поубирал из кода сопли, которые остались от прошлых итераций
разработки и залил получившийся код на гитхаб.</p>
<p>Тут я покумекал и стал искать выход на автора оригинальной игры -
Олега Шамшуру. Тут опять мне помог true-grue. Узнав, что народ
интересуется его игрой, Олег порадовался и благословил выпуск
ремейка. Попутно рассказал много всякого интересного о платформе MSX,
компьютеризации школ в конце восьмидесятых - начале девяностых годов и
о версиях и клонах игры &ldquo;Штурман&rdquo;, которые появлялись во время её
популярности. Некоторые были весьма оригинальными, скажу я вам! Но
это, пожалуй история на целый отдельный разговор.</p>
<p>Гитхаб мощная штука. Без него дальнейший напилинг игры, в которой
между делом появились все уровни, копирующие уровни оригинальной игры,
происходил бы гораздо медленнее. Граждане, используйте в разработке
системы контроля версий! Выяснилось страшное - оператор goto, бывший
основой интерпретатора команд, появился в Lua начиная с версии 5.2 и
поддерживался в luajit. В инстеде, собранном с версией Lua 5.1 игра не
работала. Тут очень сильно помог gl00my. Он переписал ядро
интерпретатора без использования goto, за что огромное ему спасибо.</p>
<p>На этом интенсивный этап разработки игры был закончен. Игра залита в
реп. Время от времени я прикручиваю к ней всякие мелкие штуки и она
всё ещё остаётся после этого рабочей. Версия потихоньку ползёт к 1.0</p>
<p>Играйте на здоровье.</p>
<h2 id="слухи">Слухи</h2>
<p>Ходят слухи, что игры пишутся следующими людьми: Irremann, spline,
Wol4ik, Casper. Будем надеяться, что синдром &ldquo;Есть анонс - нет игры&rdquo; в
нашем случае не сработает. Да и какой это анонс? Это всего-лишь слухи.</p>
<p>Еще были слухи что Peter и Vorov2 пишут игру, к сожалению, на данный
момент эти слухи не подтвердились.</p>
<p>Ходят слухи, что Antokolos пилит порт INSTEAD на WinRT и UWP. И даже
какие-то патчи были влиты в git INSTEAD'а. Я очень надеюсь, что все
получится и в версии INSTEAD 3.2 портов станет больше. ;) Спасибо,
Antokolos!</p>
<p>Ходят устойчивые слухи о выходе INSTEAD 3.2.0. Я думаю,
слухам можно верить. Где-нибудь ближе к НГ версия может увидеть свет.</p>
<h2 id="кружок-программирования">Кружок программирования</h2>
<p>Итак, после выхода INSTEAD3 интерпретатором поддерживаются два API:</p>
<ul>
<li>старое API &ndash; STEAD2</li>
<li>новое API &ndash; STEAD3</li>
</ul>
<p>На чем писать свою игру?</p>
<p>STEAD2 будет поддерживаться интерпретатором и дальше. Поэтому, если вы
уже пишете игру на STEAD2 или, по каким то причинам предпочитаете
старое API новому &ndash; вы можете спокойно продолжать это делать. Однако,
старое API больше не будет развиваться. Оно останется навсегда в том
состоянии, в котором его застал выход STEAD3.</p>
<p>STEAD3 содержит в себе множество улучшений. На нем гораздо сложнее
ошибиться и не заметить этого, чем в случае с STEAD2. На STEAD3 уже
было написано несколько игр разного объема, и пока API показывает себя
с хорошей стороны. Однако на STEAD3 все еще не перенесены некоторые
модули. Например, метапарсер существует только на STEAD2.</p>
<p>Итак, если вы пишете обычную игру (не на метапарсере) я рекомендую
дать шанс STEAD3. Если вы уже написали часть игры в STEAD2 &ndash;
заканчивайте ее на STEAD2.</p>
<p>На самом деле, с выходом STEAD3 API в подходе написания игр изменилось
многое. Поэтому я советую просто взять и
прочитать
<a href="https://github.com/instead-hub/instead/blob/master/doc/stead3.md">новую документацию</a> от
начала и до конца хотя бы один раз.</p>
<p>Не смотря на внешнюю похожесть, движок полностью переписан и
переосмыслен. Из полезных практических нововведений:</p>
<ul>
<li>движок теперь контролирует обращение к неинициализированным
переменным;</li>
<li>новый отладчик;</li>
<li>спрайты (и новые пиксели) не требуют вызовов free;</li>
<li>более простое и однозначное поведение;</li>
<li>хандлы объектов больше не обязательны, достаточно имени.</li>
</ul>
<p>Отдельно хочется отметить новый отладчик. Теперь, для его активации
достаточно запустить инстед с параметром -debug. Вы также можете
создать файл profile (~/.instead/profile для UNIX систем) со строкой
debug=1, чтобы не писать -debug руками.</p>
<p>Вызов отладчика осуществляется по ctrl-d. Я надеюсь новый отладчик
вам понравится. Кроме очевидных удобств, он корректно работает даже с
играми использующими спрайты. Этот отладчик доступен только для STEAD3.</p>
<p>Насчет модулей. На данный момент многие модули уже перенесены на новое
API. Некоторые модули вы можете
найти <a href="https://github.com/gl00my/stead3/tree/master/tests">здесь</a></p>
<p>Среди относительно протестированных модулей можно отметить:</p>
<ul>
<li>proxymenu;</li>
<li>fonts;</li>
<li>cutscene;</li>
</ul>
<p>Также есть
модуль
<a href="https://github.com/instead-hub/instead/tree/master/doc/examples/stead3/keyboard">keyboard</a></p>
<p>Написание своих модулей требует понимание того, как работает
STEAD3. Поэтому, обязательно прочитайте документацию
по
<a href="https://github.com/instead-hub/instead/blob/master/doc/modules3.md">модулям STEAD3</a></p>
<p>С появлением INSTEAD 3 на ряду со спрайтами в нем появился объект
pixels. Пиксели позволяют работать с пиксельной графикой
напрямую. Кроме того, пиксели не подвергаются масштабированию при
загрузке как спрайты. Масштабируется вся картинка целиком при
превращении его в спрайт. Таким образом можно создать pixels
фиксированного разрешения, модифицировать отдельные пиксели,
использовать геометрические примитивы и так далее, а на последнем
этапе отрисовать его в экран спрайтом.</p>
<p>Ладно, это все лирика. В качестве чего-то более практически
интересного я расскажу о подобии системы регрессионного тестирования,
которую я использовал при разработке игры &ldquo;Проводник&rdquo;.</p>
<h3 id="автоматическое-тестирование-при-помощи-tiny-instead">Автоматическое тестирование при помощи tiny-instead</h3>
<p>Одной из особенностей INSTEAD 3 является более модульная архитектура,
которая упростила встраивание INSTEAD. В каталоге с исходным кодом
instead в src/tiny реализован интерпретатор INSTEAD всего в 100
строках кода на C. На UNIX системе вы можете зайти в этот каталог и
собрать себе tiny-instead. Это все потенциально доступно не только для
Unix people, но и для пользователей других ОС. Однако, готовых
бинарных сборок и портов tiny-instead на данный момент не
существует. ;) Так что если вам понравится tiny-instead, ищите способ
портировать его в свою ОС.</p>
<p>Итак, после того как вы собрали tiny-instead, вы можете запустить
игру:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ ./tiny-instead &lt;путь к каталогу с игрой&gt;
</code></pre></div><p>Все классические игры должны работать. По понятным причинам, некоторые
функции недоступны в 100 строчной версии: типа спрайтов, таймера и
клавиатуры.</p>
<p>Ввод команд осуществляется путем набора цифр. Для использования
предмета на предмет вы пишите: цифра,цифра. Где цифры означают объекты
сцены (они видны в скобках после слов).</p>
<p>В tiny-instead есть режим записи команд в stderr. Таким образом,
сначала мы создаем скрипт прохождения (тестирования) игры.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ ./tiny-instead &lt;путь к игре&gt; 2&gt;log.txt
</code></pre></div><p>После чего, в приглашении пишем log и &lt;ввод&gt; и начинаем прохождение
игры. Когда, наконец, мы проходим всю игру, можно выйти командой quit.</p>
<p>У нас появился log.txt. Теперь, чтобы прогнать всю игру с самого
начала в автоматическом режиме мы делаем:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ cat log.txt | ./tiny-instead &lt;путь к игре&gt;
</code></pre></div><p>И сравниваем вывод с эталоном. Этот метод &ldquo;регрессионного
тестирования&rdquo; помог мне при разработке проводника и INSTEAD. Когда я
менял что то в STEAD3, я снова прогонял эталонный скрипт и смотрел &ndash;
ведет ли себя игра корректно с этими изменениями в API.</p>
<p>Я думаю 100 строчному интерпретатору можно найти и другое интересное
применение. Например, какой-нибудь веб программист мог бы написать на
основе tiny-instead INSTEAD бота для Telegram и показывать свои игры
друзьям в привычной им среде. :)</p>
<p>Надеюсь, сегодняшний кружок программирования был интересным.</p>
<h2 id="метафизика">Метафизика</h2>
<p>Возможно, многим из вас этот выпуск показался грустным. И это,
вероятно, действительно так. :) Однако я не хочу чтобы мои рассуждения
о будущем жанра воспринимались как пессимизм. Проект INSTEAD реагирует
на современность вполне адекватно: новые две веб-версии, расширение
количества портов, актуальные версии в дистрибутивах, качественные
игры &ndash; все это говорит о том, что INSTEAD держит удар с технической
стороны.</p>
<p>Однако цели проекта INSTEAD могут со временем перестать быть
актуальными для современного сообщества авторов и читателей. И это то,
что невозможно изменить. Это можно только наблюдать и как то
реагировать.</p>
<p>Приведем мысленный эксперимент. Берем игру &ldquo;Кнопка&rdquo; и отправляем в
виде ссылки на веб версию вашим знакомым. Какая часть из них вообще
поймет, что это такое? Кто попытается пройти игру?</p>
<p>Те технари, которым сейчас 30-40+ &ndash; могли бы, но обычно они уже
заняты другими делами. Те люди, которые молоды &ndash; скорее всего не
восприймут эту игру как игру и закроют странную страницу. Значит ли
это, что не надо было выпускать такую игру? Или, может быть, вместо
этого надо было написать какой-нибудь забавный прикол/демотиватор и
запустить его в соцсети для сбора лайков? Ради чего создавалась игра?</p>
<p>На данный момент мне кажется, что INSTEAD интересен главным образом в
среде определенных людей и попытки &ldquo;угодить всем&rdquo; обречены. Пусть
INSTEAD будет тем, чем и был с самого начала.</p>
<p>Если вы хотите написать коммерческую игру &ndash; вы можете это сделать. Но
продвижение вашей игры не является непосредственной целью
проекта. Коммерческий успех &ndash; не синоним качественному произведению
(хотя и не препятствие).</p>
<p>Если вы пишете игру на конкурс РИЛ и вам подходит INSTEAD &ndash; здорово!
Но имейте в виду, что и это не является непосредственной целью
проекта. На мой взгляд, сообщество РИЛ слишком всеядно, чтобы
выступать в роли критика к которому стоит серъезно
прислушиваться.</p>
<p>Если вы пишете игру для собственного развлечения и вам подходит
INSTEAD &ndash; отлично! Но не ожидайте к себе повышенного внимания только
на том основании, что вы выбрали этот движок. Пропаганда движка как
самоцели &ndash; совершенное искажение целей проекта.</p>
<p>Основная цель проекта &ndash; создание доступного средства для творчества.
А &ldquo;выхлопом&rdquo; <em>настоящего</em> творчества являются качественные
произведения. А в пределе &ndash; произведения, которые способны стать
частью культуры. Конечно, наш проект это не консерватория, но это
может быть хотя бы &hellip; игрой в консерваторию. :)</p>
<p>Интересно, что примеры команд типа <a href="http://www.retroguru.com">www.retroguru.com</a> или сообщества
sailfish показывают, что на всем земном шаре всегда найдется несколько
твоих единомышленников для которых то, что ты делаешь &ndash; ценно. И так
как в основе этих отношений лежат не деньги, а что то большее &ndash;
жизнеспособность таких сообществ может оказаться сильнее чем кажется
на первый взгляд.</p>
<p>Например, в магазине и репозиториях для Sailfish практически нет
коммерческого софта. В каком то смысле это означает увядание. Для
коммерческих компаний совершенно бессмысленно выпускать продукт в
такой среде. Более того, пример блокировки аккаунтов whatsup из за
использования &ldquo;неофициального&rdquo; приложения на SailfishOS весьма
показателен. Итак, кому сегодня нужен телефон без whatsup?</p>
<p>Но с другой стороны&hellip; Представьте себе мир без рекламы, без
маркетоидов. Мир в котором люди занимаются творчеством не потому, что
им это приносит выгоду или славу, а потому что они хотят сделать мир
хоть чуточку лучше&hellip; Не впечатляет? Ну что же, тогда нам не по пути.</p>
<p><em>До встречи на полях ПРИНТЕДА!</em></p>
<p>P.S. Совсем забыл! true-grue опубликовал хорошую статью на хабре,
которая, по моему, перекликается с ПРИНТЕДОМ. Приятного чтения: <a href="https://habrahabr.ru/post/340652/">&ldquo;Звездный торговец&rdquo; или компьютерное обучение в эпоху мини-компьютеров</a>.</p>


<div class="block">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = "instead"; 
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

				</article>
			</div>
		</div>
	</div>
</section>

<footer class="footer">
  <div class="container content">
	<div class="has-text-centered">
		<p><i class="fab fa-github"></i> <a href="https://github.com/instead-hub/instead">github.com/instead-hub/instead</a>
			  

		   </p>
		<hr>
		<p class="has-text-grey is-size-7">
		 Автор <a href="http://syscall.ru/">Петр Косых</a><br>
			   
		 &copy; 2009-2020<br>
			   
		</p>
	</div>
  </div>
</footer>


<script type="application/ld+json">
{ 
	"@context": "http://schema.org", 
	"@type": "WebPage",
	"@id": "\/article\/printed4\/",
	"name": "ПРИНТЕД 4",
}
</script>




<script>
document.addEventListener('DOMContentLoaded', function () {
  var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
  if ($navbarBurgers.length > 0) {
    $navbarBurgers.forEach(function ($el) {
      $el.addEventListener('click', function () {
        var target = $el.dataset.target;
        var $target = document.getElementById(target);
        $el.classList.toggle('is-active');
        $target.classList.toggle('is-active');
      });
    });
  }
});
</script>
 

</body>
</html>
